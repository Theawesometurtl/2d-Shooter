(()=>{"use strict";class e{static numberOfEnemies=0;static radius=12;constructor(t,i){this.type="normal",this.colour="red",this.position={x:t,y:i},this.speed=3,this.radius=e.radius,e.numberOfEnemies++,this.enemyNumber=e.numberOfEnemies}draw(){ctx.beginPath();let e=this.position.x,i=this.position.y;!0===t.cameraLock&&(e+=-t.player.position.x+centerX,i+=-t.player.position.y+centerY),t.ctx.arc(e,i,this.radius,0,2*Math.PI,!1),t.ctx.fillStyle=this.colour,t.ctx.fill(),t.ctx.lineWidth=5,t.ctx.strokeStyle="#003300",t.ctx.stroke()}update(){this.move(),this.collisionCheck()}move(){let e=t.player.position.x-this.position.x,i=t.player.position.y-this.position.y,s=Math.abs(e)+Math.abs(i);this.position.x+=e/s*this.speed,this.position.y+=i/s*this.speed}collisionCheck(){for(let e=0;e<i.playerBullet?.length;e++)if(i.playerBullet[e].position.x>this.position.x-this.radius&&i.playerBullet[e].position.x<this.position.x+this.radius&&i.playerBullet[e].position.y>this.position.y-this.radius&&i.playerBullet[e].position.y<this.position.y+this.radius){i.playerBullet[e].killed=!0;for(let e=0;e<i.enemy.length;e++)i.enemy[e].enemyNumber===this.enemyNumber&&(i.enemy.splice(e,1),changeScore(1))}if(Math.abs(this.position.x-player.position.x)+Math.abs(this.position.y-player.position.y)<t.player.radius+this.radius){t.player.hurt();for(let e=0;e<i.enemy.length;e++)i.enemy[e].enemyNumber===this.enemyNumber&&(i.enemy.splice(e,1),changeScore(1))}}static spawnEnemy(s){let n,o,a,l=Math.random(),r=Math.random();l<.25?(n=parseInt(r*canvas.width),o=parseInt(-e.radius)):l<.5?(n=parseInt(canvas.width+e.radius),o=parseInt(r*canvas.height)):l<.75?(n=parseInt(r*canvas.width),o=parseInt(canvas.height+e.radius)):(n=parseInt(r-e.radius),o=parseInt(r*canvas.height)),!0===t.cameraLock&&(n+=t.player.position.x-centerX,o+=t.player.position.y-centerY),"normal"===s?a=new e(n,o):"shooter"===s&&(a=new Shooter(n,o)),i.enemy.push(a)}}let t={centerX:canvas.width/2,centerY:canvas.height/2,score:0,highscore:0,game:void 0,cameraLock:!0,player:new Player,mousePos:{},pressedKeys:{},canvas:document.querySelector("canvas"),ctx:canvas.getContext("2d")},i={},s=0,n=.03;class o{static numberOfBullets=0;constructor(e,t,i,s,n,a){this.type=n,this.colour=a,o.numberOfBullets++,this.bulletNumber=o.numberOfBullets,this.angle=e,this.speed=s,this.position={x:t,y:i},this.xSpeed=Math.cos(e)*s,this.ySpeed=Math.sin(e)*s,this.radius=2,this.killed=!1}update(){this.position.x+=this.xSpeed,this.position.y+=this.ySpeed;let e=this.position.x,s=this.position.y;if(!0===t.cameraLock&&(e+=-t.player.position.x+centerX,s+=-t.player.position.y+centerY),e>t.canvas.width||e<0||s>t.canvas.height||s<0)for(let e=0;e<i[this.type].length;e++)i[this.type][e].bulletNumber===this.bulletNumber&&i[this.type].splice(e,1)}draw(){let e=this.position.x,i=this.position.y;!0===t.cameraLock&&(e+=-t.player.position.x+centerX,i+=-t.player.position.y+centerY),t.ctx.beginPath(),t.ctx.arc(e,i,this.radius,0,2*Math.PI,!1),t.ctx.fillStyle=this.colour,t.ctx.fill(),t.ctx.lineWidth=5,t.ctx.strokeStyle=this.colour,t.ctx.stroke(),t.ctx.closePath()}}alert("hello from webpack");const a=document.querySelector("canvas");a.style="display: none",a.width=window.innerWidth,a.height=window.innerHeight,document.getElementById("start").addEventListener("change",(t.canvas.style="display: block",document.getElementById("start").style.display="none",document.getElementById("game-over").style.display="none",document.getElementById("highscore").style.display="none",document.getElementById("login-screen").style.display="none",document.getElementById("score").innerHTML="Score: "+t.score,document.body.style.backgroundColor="#ffffff",i={enemy:[],playerBullet:[],shooterBullet:[]},t.player=new Player(t.centerX,t.centerY),t.score=0,t.game=setInterval((function(){t.ctx.clearRect(0,0,window.innerWidth,window.innerHeight),t.player.update(),t.player.draw();for(const[e,t]of Object.entries(i))for(let t=0;t<i[e]?.length;t++){i[e][t].update();try{i[e][t].draw()}catch(e){}}if(s+=n,n+=1e-5,s>=1){let t="normal";Math.random()>.75&&(t="shooter"),e.spawnEnemy(t),s=0}}),30),canvas.addEventListener("click",(function(){let e=new o(player.gunAngle,player.position.x,player.position.y,player.bulletSpeed,"playerBullet","black");t.entityList.playerBullet.push(e)})),t.canvas.addEventListener("mousemove",(function(e){var i=canvas.getBoundingClientRect();t.mousePos={x:e.clientX-i.left,y:e.clientY-i.top}})),window.onkeyup=function(e){pressedKeys[e.keyCode]=!1},void(window.onkeydown=function(e){pressedKeys[e.keyCode]=!0}))),document.getElementById("gameEnd").addEventListener("change",(clearInterval(t.game),t.canvas.style="display: none",document.getElementById("game-over").style.display="block",document.getElementById("highscore").style.display="block",document.getElementById("login-screen").style.display="block",document.body.style.backgroundColor="#1bafdb",void(t.score>t.highscore&&(t.highscore=t.score,document.getElementById("highscore").innerText="HighScore: "+t.highscore))))})();